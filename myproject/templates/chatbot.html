{% extends 'base.html' %}
{% block content %}
<div class="container-fluid h-100">
    <div class="row h-100">
        <nav id="sidebar" class="sidebar py-3">
            <button class="toggle-btn" id="toggleSidebar">
                <i class="fas fa-bars"></i>
            </button>
            <h2>Nhật Ký</h2>
            <ul id="sidebar-list" class="nav flex-column">
                <li class="nav-item"><a class="nav-link" href="#">Nhật ký 1</a></li>
                <li class="nav-item"><a class="nav-link" href="#">Nhật ký 2</a></li>
                <li class="nav-item"><a class="nav-link" href="#">Nhật ký 3</a></li>
            </ul>
        </nav>

        <main class="col h-100 d-flex flex-column" style="padding: 0; margin-left: 250px;">
            <div class="bg-dark text-white p-2 d-flex justify-content-end align-items-center">
                <button class="btn btn-secondary mr-2" onclick="addNewItem()">
                    <i class="fas fa-plus"></i> Tạo mới
                </button>

                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fas fa-cog"></i> Cài đặt
                    </button>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="#">Cài đặt 1</a>
                        <a class="dropdown-item" href="#">Cài đặt có nội dung dài hơn để kiểm tra</a>
                        <a class="dropdown-item" href="#">Cài đặt 3</a>
                    </div>
                </div>
            </div>

            <div class="flex-grow-1 d-flex flex-column p-3">
                <div id="output" class="output-form mb-3">
                    <p>Output sẽ được hiển thị tại đây...</p>
                </div>

                <div class="input-form d-flex align-items-stretch">
                    <textarea id="textField" class="form-control flex-fill w-50 mr-2" placeholder="Nhập màn hình chức năng (vd: login,..)"></textarea>
                    <textarea id="textInput" class="form-control flex-fill mr-2" placeholder="Nhập yêu cầu màn hình"></textarea>
                    <button class="btn btn-primary" style="height: 40px;" onclick="submitForm()">Gửi</button>
                </div>
            </div>
        </main>
    </div>
</div>

<script>
    // Toggle sidebar visibility
    document.getElementById('toggleSidebar').addEventListener('click', function() {
        var sidebar = document.getElementById('sidebar');
        sidebar.classList.toggle('collapsed');
        
        var mainContent = document.querySelector('main');
        if (sidebar.classList.contains('collapsed')) {
            mainContent.style.marginLeft = '0px';
        } else {
            mainContent.style.marginLeft = '250px';
        }
    });

    let itemCount = 4;
    function addNewItem() {
        const sidebarList = document.getElementById("sidebar-list");
        const newItem = document.createElement("li");
        newItem.className = "nav-item";
        newItem.innerHTML = `<a class="nav-link" href="#">Nhật ký ${itemCount}</a>`;
        sidebarList.appendChild(newItem);
        itemCount++;
    }

    function submitForm() {
        const textField = document.getElementById("textField").value;
        const textInput = document.getElementById("textInput").value;
        const output = document.getElementById("output");

        if (textField && textInput) {
            const newEntry = document.createElement("p");
            newEntry.textContent = `Văn bản: ${textField}, Nội dung: ${textInput}`;
            output.appendChild(newEntry);

            document.getElementById("textField").value = '';
            document.getElementById("textInput").value = '';
        } else {
            alert("Vui lòng nhập đầy đủ thông tin!");
        }
    }
</script>
{% endblock %}
