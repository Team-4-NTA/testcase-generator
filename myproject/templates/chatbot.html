{% extends 'base.html' %}

{% block styles %}
<style>
    body, html {
        height: 100%;
        font-family: Arial, sans-serif;
        margin: 0;
    }

    .sidebar {
        background-color: #333;
        color: white;
        width: 250px;
        height: 100%;
        transition: width 0.3s ease;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 1050;
    }

    .sidebar.collapsed {
        width: 0px;
    }

    .sidebar a {
        color: white;
        padding: 10px;
        text-decoration: none;
        display: block;
        transition: padding 0.3s;
    }

    .sidebar a:hover {
        background-color: #444;
    }

    .sidebar .toggle-btn {
        background: none;
        border: none;
        color: white;
        font-size: 20px;
        cursor: pointer;
        position: absolute;
        top: 10px; 
        left: 20px;
    }

    .sidebar h2 {
        text-align: center;
        margin-top: 50px; 
    }

    .sidebar ul {
        list-style: none;
        padding: 0;
    }

    .sidebar ul li {
        padding: 5px 0;
    }

    .sidebar.collapsed .nav-link {
        text-align: center;
        padding: 10px 0;
    }

    .sidebar.collapsed h2, .sidebar.collapsed ul {
        display: none;
    }

    .output-form {
        background-color: #f1f1f1;
        overflow-y: auto;
        padding: 10px;
        flex-grow: 1;
    }

    .input-form {
        gap: 10px;
    }

    .input-form .form-control {
        height: 70px;
    }

    .input-form button {
        height: 50px;
    }

    .input-form textarea {
        min-height: 100px;
    }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid h-100">
    <div class="row h-100">
        <nav id="sidebar" class="sidebar py-3">
            <button class="toggle-btn" id="toggleSidebar">
                <i class="fas fa-bars"></i>
            </button>
            <h2>Nhật Ký</h2>
            <ul id="sidebar-list" class="nav flex-column">
                <li class="nav-item"><a class="nav-link" href="#">Nhật ký 1</a></li>
                <li class="nav-item"><a class="nav-link" href="#">Nhật ký 2</a></li>
                <li class="nav-item"><a class="nav-link" href="#">Nhật ký 3</a></li>
            </ul>
        </nav>

        <main class="col h-100 d-flex flex-column" style="padding: 0; margin-left: 250px;">
            <div class="bg-dark text-white p-2 d-flex justify-content-end align-items-center">
                <button class="btn btn-secondary mr-2" onclick="addNewItem()">
                    <i class="fas fa-plus"></i> Tạo mới
                </button>

                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fas fa-cog"></i> Cài đặt
                    </button>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="#">Cài đặt 1</a>
                        <a class="dropdown-item" href="#">Cài đặt có nội dung dài hơn để kiểm tra</a>
                        <a class="dropdown-item" href="#">Cài đặt 3</a>
                    </div>
                </div>
            </div>

            <div class="flex-grow-1 d-flex flex-column p-3">
                <div id="output" class="output-form mb-3">
                    <p>Output sẽ được hiển thị tại đây...</p>
                </div>

                <div class="input-form d-flex align-items-stretch">
                    <textarea id="textField" class="form-control flex-fill w-50 mr-2" placeholder="Nhập văn bản..."></textarea>
                    <textarea id="textInput" class="form-control flex-fill mr-2" placeholder="Nhập nội dung..."></textarea>
                    <button class="btn btn-primary" style="height: 40px;" onclick="submitForm()">Gửi</button>
                </div>
            </div>
        </main>
    </div>
</div>

<script>
    // Toggle sidebar visibility
    document.getElementById('toggleSidebar').addEventListener('click', function() {
        var sidebar = document.getElementById('sidebar');
        sidebar.classList.toggle('collapsed');
        
        var mainContent = document.querySelector('main');
        if (sidebar.classList.contains('collapsed')) {
            mainContent.style.marginLeft = '0px';
        } else {
            mainContent.style.marginLeft = '250px';
        }
    });

    let itemCount = 4;
    function addNewItem() {
        const sidebarList = document.getElementById("sidebar-list");
        const newItem = document.createElement("li");
        newItem.className = "nav-item";
        newItem.innerHTML = `<a class="nav-link" href="#">Nhật ký ${itemCount}</a>`;
        sidebarList.appendChild(newItem);
        itemCount++;
    }

    function submitForm() {
        const textField = document.getElementById("textField").value;
        const textInput = document.getElementById("textInput").value;
        const output = document.getElementById("output");

        if (textField && textInput) {
            const newEntry = document.createElement("p");
            newEntry.textContent = `Văn bản: ${textField}, Nội dung: ${textInput}`;
            output.appendChild(newEntry);

            document.getElementById("textField").value = '';
            document.getElementById("textInput").value = '';
        } else {
            alert("Vui lòng nhập đầy đủ thông tin!");
        }
    }
</script>
{% endblock %}
