{% extends 'base.html' %}
{% block content %}
<div class="flex">
    <aside
    class="w-[260px] h-screen overflow-auto bg-stone-50 border-r border-gray-200 text-sm"
    >
    <header class="h-[52px] sticky top-0 z-10">
        <div class="flex h-full justify-between items-center px-2">
        <div class="p-1.5 rounded-lg hover:bg-stone-200 cursor-pointer">
            <a href="/">
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 14 14"
            >
                <path
                fill="currentColor"
                fill-rule="evenodd"
                d="M11.188 1.045c-.182-.814-1.337-.808-1.513.007l-.017.081a2.15 2.15 0 0 1-1.715 1.674c-.84.149-.84 1.362 0 1.511a2.15 2.15 0 0 1 1.715 1.674l.017.081c.176.815 1.33.821 1.513.007l.022-.095a2.16 2.16 0 0 1 1.72-1.666c.843-.149.843-1.364 0-1.513a2.16 2.16 0 0 1-1.72-1.666zm-9.5.768v3.5h3.5v-3.5zm-1.25-.15a1.1 1.1 0 0 1 1.1-1.1h3.798a1.1 1.1 0 0 1 1.101 1.1v3.798a1.1 1.1 0 0 1-1.1 1.101H1.538a1.1 1.1 0 0 1-1.101-1.1zm1.25 7.15v3.5h3.5v-3.5zm-1.25-.15a1.1 1.1 0 0 1 1.1-1.1h3.798a1.1 1.1 0 0 1 1.101 1.1v3.798c0 .609-.493 1.102-1.1 1.102H1.538a1.1 1.1 0 0 1-1.1-1.103zm8.25 3.65v-3.5h3.5v3.5zm-.15-4.75a1.1 1.1 0 0 0-1.1 1.1v3.798a1.1 1.1 0 0 0 1.1 1.101h3.798a1.1 1.1 0 0 0 1.102-1.1V8.663c0-.608-.493-1.101-1.102-1.101z"
                clip-rule="evenodd"
                />
            </svg>
            </a>
        </div>
        <div class="p-1.5 rounded-lg hover:bg-stone-200 cursor-pointer">
            <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 24 24"
            >
            <path
                fill="#8f8f8f"
                fill-rule="evenodd"
                d="M9.944 2.25c-1.838 0-3.294 0-4.433.153c-1.172.158-2.121.49-2.87 1.238c-.748.749-1.08 1.698-1.238 2.87c-.153 1.14-.153 2.595-.153 4.433v2.112c0 1.838 0 3.294.153 4.433c.158 1.172.49 2.121 1.238 2.87c.749.748 1.698 1.08 2.87 1.238c1.14.153 2.595.153 4.433.153h5.022l.072-.001c1.384-.004 2.523-.027 3.451-.152c1.172-.158 2.121-.49 2.87-1.238c.748-.749 1.08-1.698 1.238-2.87c.153-1.14.153-2.595.153-4.433v-2.112c0-1.838 0-3.294-.153-4.433c-.158-1.172-.49-2.121-1.238-2.87c-.749-.748-1.698-1.08-2.87-1.238c-.928-.125-2.067-.148-3.45-.152h-.073l-.91-.001zm4.306 1.5H10c-1.907 0-3.261.002-4.29.14c-1.005.135-1.585.389-2.008.812S3.025 5.705 2.89 6.71c-.138 1.029-.14 2.383-.14 4.29v2c0 1.907.002 3.262.14 4.29c.135 1.005.389 1.585.812 2.008s1.003.677 2.009.812c1.028.138 2.382.14 4.289.14h4.25zm1.5 16.494c1.034-.01 1.858-.042 2.54-.134c1.005-.135 1.585-.389 2.008-.812s.677-1.003.812-2.009c.138-1.027.14-2.382.14-4.289v-2c0-1.907-.002-3.261-.14-4.29c-.135-1.005-.389-1.585-.812-2.008s-1.003-.677-2.009-.812c-.68-.092-1.505-.123-2.539-.134z"
                clip-rule="evenodd"
            />
            </svg>
        </div>
        </div>
    </header>
    <nav class="h-[calc(100%-52px)] overflow-auto">
        <div class="pt-2 pb-4">
        <ul class="cursor-pointer">
            <li class="mx-2 p-2 rounded-lg hover:bg-stone-200" onclick="addNewItem()">
            <div class="flex gap-2 justify-center items-center">
                <svg
                xmlns="http://www.w3.org/2000/svg"
                width="21"
                height="21"
                viewBox="0 0 24 24"
                >
                <g
                    fill="none"
                    stroke="#2e2e2e"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="1.5"
                >
                    <path
                    d="M9.533 11.15A1.82 1.82 0 0 0 9 12.438V15h2.578c.483 0 .947-.192 1.289-.534l7.6-7.604a1.82 1.82 0 0 0 0-2.577l-.751-.751a1.82 1.82 0 0 0-2.578 0z"
                    />
                    <path
                    d="M21 12c0 4.243 0 6.364-1.318 7.682S16.242 21 12 21s-6.364 0-7.682-1.318S3 16.242 3 12s0-6.364 1.318-7.682S7.758 3 12 3"
                    />
                </g>
                </svg>
                <span class="truncate block w-full">Đoạn chat mới</span>
            </div>
            </li>
            <li class="mx-2 p-2 rounded-lg hover:bg-stone-200">
            <div class="flex gap-2 justify-center items-center">
                <svg
                xmlns="http://www.w3.org/2000/svg"
                width="21"
                height="21"
                viewBox="0 0 24 24"
                >
                <path
                    fill="none"
                    stroke="#2e2e2e"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M3 10a7 7 0 1 0 14 0a7 7 0 1 0-14 0m18 11l-6-6"
                />
                </svg>
                <span class="truncate block w-full">Tìm kiếm đoạn chat</span>
            </div>
            </li>
            <li class="mx-2 p-2 rounded-lg hover:bg-stone-200">
            <div class="flex gap-2 justify-center items-center">
                <svg
                xmlns="http://www.w3.org/2000/svg"
                width="21"
                height="21"
                viewBox="0 0 24 24"
                >
                <g fill="none">
                    <path
                    stroke="#2e2e2e"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M22 6v12a4 4 0 0 1-4 4H6"
                    />
                    <path
                    fill="#2e2e2e"
                    fill-rule="evenodd"
                    d="M1 3.7A2.7 2.7 0 0 1 3.7 1h12.6A2.7 2.7 0 0 1 19 3.7v5.85q0 .117-.028.225A1 1 0 0 1 19 10v6.3a2.7 2.7 0 0 1-2.7 2.7H3.7A2.7 2.7 0 0 1 1 16.3v-2.7a1 1 0 0 1 .028-.225A1 1 0 0 1 1 13.15zm2.695 8.848a14 14 0 0 0-.895.04V3.7a.9.9 0 0 1 .9-.9h12.6a.9.9 0 0 1 .9.9v5.414c-3.868.125-6.66 1.057-8.623 2.36c.745.265 1.575.64 2.391 1.131c1.26.756 2.54 1.819 3.4 3.225a.9.9 0 1 1-1.535.94c-.663-1.083-1.69-1.96-2.792-2.622c-1.1-.66-2.218-1.073-2.994-1.253a14 14 0 0 0-3.333-.348h-.02zM5.48 5.04a2.4 2.4 0 0 1 1.37-.44c.369 0 .903.103 1.37.44c.513.369.88.977.88 1.81s-.367 1.441-.88 1.81a2.4 2.4 0 0 1-1.37.44c-.369 0-.903-.103-1.37-.44c-.513-.369-.88-.977-.88-1.81s.367-1.441.88-1.81"
                    clip-rule="evenodd"
                    />
                </g>
                </svg>
                <span class="truncate block w-full">Thư viện</span>
            </div>
            </li>
            <li class="mx-2 p-2 rounded-lg hover:bg-stone-200">
            <div class="flex gap-2 justify-center items-center">
                <svg
                xmlns="http://www.w3.org/2000/svg"
                width="21"
                height="21"
                viewBox="0 0 32 32"
                >
                <path
                    fill="#2e2e2e"
                    d="M4 8.5V11h6.464a1.5 1.5 0 0 0 1.061-.44l2.06-2.06l-2.06-2.06a1.5 1.5 0 0 0-1.06-.44H6.5A2.5 2.5 0 0 0 4 8.5m-2 0A4.5 4.5 0 0 1 6.5 4h3.964a3.5 3.5 0 0 1 2.475 1.025L15.414 7.5H25.5A4.5 4.5 0 0 1 30 12v4.292a9 9 0 0 0-2-1.357V12a2.5 2.5 0 0 0-2.5-2.5H15.414l-2.475 2.475A3.5 3.5 0 0 1 10.464 13H4v10.5A2.5 2.5 0 0 0 6.5 26h9.012c.252.712.59 1.383 1.003 2H6.5A4.5 4.5 0 0 1 2 23.5zm22 22a7.5 7.5 0 1 0 0-15a7.5 7.5 0 0 0 0 15m1-12.25V22h3.75a.75.75 0 0 1 0 1.5H25v3.75a.75.75 0 0 1-1.5 0V23.5h-3.75a.75.75 0 0 1 0-1.5h3.75v-3.75a.75.75 0 0 1 1.5 0"
                />
                </svg>
                <span class="truncate block w-full">Dự án</span>
            </div>
            </li>
        </ul>
        </div>
        <div>
        <h2 class="px-2.5 py-1.5 mx-2">
            <span class="text-gray-400">Đoạn chat</span>
        </h2>
        <ul class="cursor-pointer" id="sidebar-list">
            <!-- List items -->
        </ul>
        </div>
    </nav>
    </aside>
    <div class="w-[calc(100%-260px)] h-screen overflow-auto">
    <header class="h-[52px] sticky top-0 z-10 bg-white">
        <div class="flex h-full p-2 justify-between items-center">
        <div class="py-1 px-2.5 rounded-lg hover:bg-stone-200">
            <div class="text-lg cursor-pointer">
            <div class="flex gap-1 items-center">
                <div>AI Generator</div>
                <svg
                xmlns="http://www.w3.org/2000/svg"
                width="15"
                height="15"
                viewBox="0 0 24 24"
                >
                <path
                    fill="none"
                    stroke="#8f8f8f"
                    stroke-dasharray="12"
                    stroke-dashoffset="12"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 16l-7 -7M12 16l7 -7"
                >
                    <animate
                    fill="freeze"
                    attributeName="stroke-dashoffset"
                    dur="0.3s"
                    values="12;0"
                    />
                </path>
                </svg>
            </div>
            </div>
        </div>
        <div class="p-1.5 rounded-lg hover:bg-stone-200 cursor-pointer">
            <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 256 256"
            >
            <path
                fill="#2e2e2e"
                d="M144 128a16 16 0 1 1-16-16a16 16 0 0 1 16 16m-84-16a16 16 0 1 0 16 16a16 16 0 0 0-16-16m136 0a16 16 0 1 0 16 16a16 16 0 0 0-16-16"
            />
            </svg>
        </div>
        </div>
    </header>
    <main class="relative z-0">
        <div class="w-full max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="md:pt-[16px] md:pb-[16px] min-h-[calc(100vh-260px)] space-y-[20px]" id="responses">
            <!-- Các câu hỏi và câu trả lời sẽ được thêm vào đây -->
        </div>
        </div>
    </main>
    <footer class="sticky bottom-0">
        <div class="w-full max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="relative">
            <form
            action=""
            class="p-4 border border-gray-200 rounded-4xl bg-white relative z-2"
            >
            <div
                class="absolute right-0 top-0 text-xs py-3 px-5 font-semibold flex gap-3 items-center"
            >
                <div class="flex items-center hover:text-gray-600">
                <input type="radio" id="api" name="fav_language" value="api"/>
                <label for="api" class="ml-1">API</label>
                </div>
                <div class="flex items-center hover:text-gray-600">
                <input type="radio" id="spec" name="fav_language" value="spec"/>
                <label for="spec" class="ml-1">SPEC</label>
                </div>
            </div>

            <div class="mt-2 mb-3 flex gap-2">
                <label for="screen_name" class="w-[75px] font-semibold">
                Màn hình:
                </label>
                <input
                type="text"
                id="screen_name"
                name="screen_name"
                placeholder="Nhập nội dung"
                class="flex-1 focus:outline-none"
                />
            </div>
            <div class="my-3 flex gap-2">
                <label for="requirement" class="w-[75px] font-semibold">
                Yêu cầu:
                </label>
                <textarea
                id="requirement"
                name="requirement"
                rows="2"
                placeholder="Nhập yêu cầu"
                class="flex-1 focus:outline-none resize-none"
                ></textarea>
            </div>
            <div class="flex justify-between items-center">
                <div class="flex gap-2">
                <button
                    onclick="createTemplate()"
                    type="button"
                    class="w-[110px] py-1 px-2 rounded-2xl text-gray-500 border border-gray-200 hover:bg-stone-200 cursor-pointer"
                >
                    <div class="flex gap-1 items-center">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                    >
                        <path
                        fill="#8f8f8f"
                        d="m20.467 8.694l.246-.566a4.36 4.36 0 0 1 2.22-2.25l.759-.339a.53.53 0 0 0 0-.963l-.717-.319a4.37 4.37 0 0 1-2.251-2.326l-.253-.611a.506.506 0 0 0-.942 0l-.253.61a4.37 4.37 0 0 1-2.25 2.327l-.718.32a.53.53 0 0 0 0 .962l.76.338a4.36 4.36 0 0 1 2.219 2.251l.246.566c.18.414.753.414.934 0M5.8 16h2.154l.6-1.5h2.892l.6 1.5H14.2L11 8H9zm4.2-5.115l.646 1.615H9.354zM15 16V8h2v8zM3 3a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-9h-2v8H4V5h10V3z"
                        />
                    </svg>
                    Template
                    </div>
                </button>
                <button
                    onclick="triggerFileInput()"
                    type="button"
                    class="w-[100px] py-1 px-2 rounded-2xl text-gray-500 border border-gray-200 hover:bg-stone-200 cursor-pointer"
                >
                    <div class="flex gap-1 items-center">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                    >
                        <path
                        fill="#8f8f8f"
                        d="M18 15.75q0 2.6-1.825 4.425T11.75 22t-4.425-1.825T5.5 15.75V6.5q0-1.875 1.313-3.187T10 2t3.188 1.313T14.5 6.5v8.75q0 1.15-.8 1.95t-1.95.8t-1.95-.8t-.8-1.95V6h2v9.25q0 .325.213.538t.537.212t.538-.213t.212-.537V6.5q-.025-1.05-.737-1.775T10 4t-1.775.725T7.5 6.5v9.25q-.025 1.775 1.225 3.013T11.75 20q1.75 0 2.975-1.237T16 15.75V6h2z"
                        />
                    </svg>
                    Upload
                    </div>
                </button>
                <input 
                    type="file" 
                    id="fileInput" 
                    style="display: none;" 
                    onchange="handleFileChange(this)" 
                />
                </div>
                <div>
                <button
                    onclick="submitForm(event)"
                    type="submit"
                    class="w-[100px] py-1 px-2 rounded-2xl text-white border border-gray-950 hover:bg-gray-800 bg-gray-950 shadow"
                >
                    Send
                </button>
                </div>
            </div>
            </form>
            <div class="absolute bottom-0 h-10 w-full bg-white z-1"></div>
        </div>
        <div class="py-1.5 text-center bg-white">
            <span class="text-xs text-gray-700">
            Hệ thống có thể mắc lỗi. Hãy kiểm tra các thông tin quan trọng.
            </span>
        </div>
        </div>
    </footer>
    </div>
</div>
<script>
    window.csrfToken = "{{ csrf_token }}";
</script>
<script type="module">
    import { v4 as uuidv4 } from 'https://cdn.jsdelivr.net/npm/uuid@9.0.0/dist/esm-browser/index.js';
    window.uuidv4 = function() {
        return uuidv4();
    }
</script>
{% load static %}
<script src="{% static 'js/style.js' %}"></script>
<script src="{% static 'js/handle.js' %}"></script>
<script src="{% static 'js/template.js' %}"></script>
{% endblock %}